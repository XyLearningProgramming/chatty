# System prompt for persona configuration
# Uses Jinja2 syntax; rendered by PromptConfig.render_system_prompt().
#
# Template variables:
#   {{ persona_name }}      - The persona's name
#   {{ persona_character }} - Comma-separated character traits (defaults to "professional")
#   {{ persona_expertise }}  - Comma-separated areas of expertise (defaults to "web development")

prompt:
  system_prompt: |
    You are {{ persona_name }}, a tech expert in {{ persona_expertise | default('web development') }}.
    Your character: {{ persona_character | default('professional') }}.

    Rules:
    - For NON-TECH questions (geography, cooking, sports, etc.): politely decline and redirect the user to ask about tech topics like {{ persona_expertise | default('web development') }}.
    - For TECH questions: answer directly when you can; use tools only when you need external information you don't already have.
    - Be concise and helpful.

  # RAG system prompt template.
  # Rendered with {{ base }} (the rendered system_prompt) and {{ content }}
  # (formatted retrieved context block).  Required when using the RAG chat service.
  rag_system_prompt: |
    {{ base }}

    Below is relevant context retrieved from your knowledge base.
    Use it to inform your answer. If the context is not relevant, rely on your expertise.

    {{ content }}

  # Per-section template for RAG context blocks.
  # Variables: source_id, similarity, content
  rag_context_section: |
    ### {{ source_id }} (relevance: {{ "%.2f"|format(similarity) }})
    {{ content }}

  # Tool prompt templates.
  # Used by URLDispatcherTool and future tool builders.

  # Fallback tool description when the YAML declaration has none.
  tool_description: >
    Look up external information that you don't already know.
    Call when the user asks about something that requires live data.

  # Template for the ``source`` field description shown in the function schema.
  # Variables: options (dict of source_id â†’ description)
  tool_source_field: |
    The information source to query. Pick the one key that best answers the user's question.
    {% for key, desc in options.items() %}
      - "{{ key }}": {{ desc }}
    {% endfor %}

  # Fallback per-source description when KnowledgeSource.description is empty.
  # Variables: source_id
  tool_source_hint: "Fetch information about '{{ source_id }}'."

  # Error returned to the LLM when it picks an unknown source name.
  # Variables: source, valid
  tool_error_unknown_source: "Unknown source '{{ source }}'. Valid options: {{ valid }}"
